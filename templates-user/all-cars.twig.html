{% set page_css = ['../css/css-user/header.css', '../css/css-user/all-cars.css', '../css/css-user/footer.css'] %}
{% set page_scripts = ['../script/script-user/all-cars.js'] %}
{% include '_header.twig.html' %}

<main>
    <div id="cars" class="page-hero">
        <h1>Ready to Find Your Next Car?</h1>
        <p class="subtitle">Temukan partner berkendara yang tepat dari ratusan mobil second berkualitas yang telah kami inspeksi.</p>
    </div>

    <div class="content-section">
        <h2 class="title-divider">Filter by Brand</h2>
        <div class="popular-categories">
            <button id="scroll-left-btn-brands" class="scroll-btn">&larr;</button>
            <div id="brands-list" class="brands-container">
                <button class="filter-btn active" data-brand="All">All</button>
                {% for brand in brands %}
                <button class="filter-btn" data-brand="{{ brand.name }}">{{ brand.name }}</button>
                {% endfor %}
            </div>
            <button id="scroll-right-btn-brands" class="scroll-btn">&rarr;</button>
        </div>

        <h2 class="title-divider">Find by Your Needs</h2>
        <div class="popular-categories">
            <button id="scroll-left-btn-types" class="scroll-btn">&larr;</button>
            <div id="types-list" class="brands-container">
                <button class="filter-btn active" data-type="All">All</button>
                {% for type in types %}
                <button class="filter-btn" data-type="{{ type.name }}">{{ type.name }}</button>
                {% endfor %}
            </div>
            <button id="scroll-right-btn-types" class="scroll-btn">&rarr;</button>
        </div>

        {# Compare Slot Notification #}
        {% if app.slot %}
        <div class="compare-slot-alert">
            <p>Anda sedang memilih mobil untuk slot ke-{{ app.slot }} perbandingan.</p>
        </div>
        {% endif %}

        <div class="advanced-filters-container">
            <button class="toggle-filters-btn" id="toggle-filters">
                <span>Advanced Filters</span>
                <i class="arrow-icon">â–¼</i>
            </button>

            <div class="filters-panel active" id="filters-panel">
                <div class="filters-grid">
                    <!-- Filter Inputs Seperti Sebelumnya -->
                </div>
            </div>
        </div>

        <h2 class="title-divider">Matching Your Criteria</h2>
        <div class="results-count" id="results-count"></div>

        <div class="vehicle-grid" id="vehicle-grid">
            {% for car in cars %}
            <div class="car-card">
                <img src="../{{ car.image_url }}" alt="{{ car.name }}">
                <h3>{{ car.name }}</h3>
                <p>Rp {{ car.price|number_format(0, ',', '.') }}</p>

                {% if app.slot %}
                    <a href="compare-set.php?slot={{ app.slot }}&id={{ car.id }}" class="select-compare-btn">Pilih Mobil Ini</a>
                {% else %}
                    <a href="detail-car.php?id={{ car.id }}" class="view-details-btn">Lihat Detail</a>
                {% endif %}
            </div>
            {% endfor %}
        </div>

        <div class="no-results" id="no-results" style="display: none;">
            <h3>No Cars found</h3>
            <p>Try adjusting your filters to see more results</p>
        </div>
    </div>
</main>

{% include '_footer.twig.html' %}
