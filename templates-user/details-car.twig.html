{% set page_css = ['../css/css-user/header.css', '../css/css-user/details-car.css', '../css/css-user/footer.css'] %}
{% set page_scripts = ['../script/script-user/details-car.js'] %}
{% include '_header.twig.html' %}

<main class="detail-container">
    <header class="detail-header">
        <a href="../php-user/all-cars.php" class="back-button">Kembali ke Daftar</a>
        <h1>{{ car.name }}</h1>
    </header>

    <div class="main-content">
        <section class="detail-gallery">
            <div class="main-image-container">
                <img id="main-car-image" src="../{{ car.image_url|e }}" alt="Tampak depan {{ car.name|e }}">
            </div>

            <div class="gallery-scroller">
                <button id="scroll-left-thumb" class="scroll-btn">&larr;</button>
                <div class="thumbnail-container">
                    {% for image in galleryImages %}
                        <button 
                            class="thumbnail-item {{ loop.first ? 'active' : '' }}" 
                            data-full-image="../{{ image.image_path|e }}">
                            <img src="../{{ image.image_path|e }}" alt="{{ image.caption|e }}">
                            <span class="thumbnail-caption">{{ image.caption|e }}</span>
                        </button>
                    {% endfor %}
                </div>
                <button id="scroll-right-thumb" class="scroll-btn">&rarr;</button>
            </div>
        </section>

        <aside class="info-panel">
            <div class="price-section">
                <div class="price-cash">Bervariasi</div>
                <div class="price-main">Rp {{ car.price|number_format(0, ',', '.') }} Cash</div>
            </div>

            <div class="car-basic-info">
                <span>📍 {{ car.km|number_format(0, ',', '.') }} km</span>
                <span>⚙️ {{ car.transmission }}</span>
            </div>

            <div class="info-items">
                <div class="info-item"><span class="info-label">All Inclusive Price</span><span class="info-value">›</span></div>
                <div class="info-item"><span class="info-label">1-Year Warranty</span><span class="info-value">Engine, Transmission, AC</span></div>
                <div class="info-item"><span class="info-label">Road Tax</span><span class="info-value">Included</span></div>
                <div class="info-item"><span class="info-label">1 Year TLO Insurance</span><span class="info-value">Included</span></div>
            </div>

            <div class="info-location">
                <h4>Lokasi Unit</h4>
                {% if car.showroom_name %}
                    <p><strong>{{ car.showroom_name }}</strong><br>{{ car.showroom_address }}</p>
                {% else %}
                    <p>Silakan hubungi kami untuk informasi lokasi.</p>
                {% endif %}
            </div>

            <div class="action-buttons">
                <button class="btn btn-primary">📞 Book Car<small>Refundable Booking</small></button>
                <button class="btn btn-secondary">🚗 Free Test Drive<small>At Experience Centers</small></button>
            </div>

            <div class="like-share-section">
                <div class="like-share-buttons">
                    {% if session.user is defined %}
                        <button class="like-btn" id="like-btn">
                            <span class="heart-icon">💖</span>
                            <span class="like-text">Like</span>
                        </button>
                    {% else %}
                        <a href="login.php" class="like-btn">
                            <span class="heart-icon">🤍</span>
                            <span class="like-text">Login untuk Like</span>
                        </a>
                    {% endif %}
                    <button class="share-btn" id="share-btn">
                        <span class="share-icon">📤</span>
                        <span class="share-text">Share</span>
                    </button>
                </div>
            </div>

            <div class="contact-section">
                <div class="contact-text">Need more help? Contact us via</div>
                <a href="#" class="whatsapp-btn">💬 WhatsApp</a>
            </div>
        </aside>
    </div>

    <div class="detail-content">
        {# SPESIFIKASI DAN INFORMASI TAMBAHAN TETAP DI SINI #}
    </div>
</main>

{% include '_footer.twig.html' %}
