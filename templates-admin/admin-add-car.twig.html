{% set page_css = ['../css/css-admin/header.css',  '../css/css-admin/admin-add-car.css', '../css/css-admin/footer.css'] %}
{% set page_scripts = ['../script/script-admin/admin-image-handler.js'] %}
{% include '_header-admin.twig.html' %}

<header class="admin-header">
    <h1>Tambah Mobil Baru</h1>
    <div class="header-actions">
        <a href="#" class="btn-secondary">Batal</a>
        <button type="submit" form="add-car-form" class="btn-primary">Simpan Mobil</button>
    </div>
</header>

<section class="admin-content">
    <form id="add-car-form" action="#" method="POST" enctype="multipart/form-data">

        <div class="form-section">
            <h2>Informasi Utama</h2>
            <div class="form-grid">
                <div class="form-group">
                    <label for="car-name">Nama Mobil</label>
                    <input type="text" id="car-name" name="name" placeholder="Contoh: Avanza 1.5 G CVT" required>
                </div>
                <div class="form-group">
                    <label for="car-brand">Merek</label>
                    <select id="car-brand" name="id_brand" required>
                        <option value="">Pilih Merek</option>
                        {% for brand in brands %}
                            <option value="{{ brand.id }}">{{ brand.name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group">
                    <label for="car-price">Harga Cash (Rp)</label>
                    <input type="number" id="car-price" name="price" placeholder="Contoh: 272500000" required>
                </div>
                <div class="form-group">
                    <label for="car-year">Tahun Pembuatan</label>
                    <input type="number" id="car-year" name="year" placeholder="Contoh: 2024" required>
                </div>
                <div class="form-group">
                    <label for="car-color">Warna</label>
                    <input type="text" id="car-color" name="color" placeholder="Contoh: Putih Mutiara">
                </div>
                <div class="form-group">
                    <label for="car-status">Status Penjualan</label>
                    <select id="car-status" name="status">
                        <option value="Available">Available</option>
                        <option value="Hold">Hold</option>
                        <option value="Sold Out">Sold Out</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="form-section">
            <h2>Spesifikasi Teknis</h2>
            <div class="form-grid">
                <div class="form-group">
                    <label for="car-km">Kilometer</label>
                    <input type="number" id="car-km" name="km" placeholder="Contoh: 15000">
                </div>
                <div class="form-group">
                    <label for="car-fuel">Tipe Bahan Bakar</label>
                    <select id="car-fuel" name="fuel_type" required>
                        <option value="">Pilih Bahan Bakar</option>
                        {% for fuel in fuels %}
                            <option value="{{ fuel.name }}">{{ fuel.name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group">
                    <label for="car-engine-cc">CC Mesin</label>
                    <input type="number" id="car-engine-cc" name="engine_cc" placeholder="Contoh: 1500">
                </div>
                <div class="form-group">
                    <label for="car-horsepower">Tenaga (HP)</label>
                    <input type="number" id="car-horsepower" name="horsepower" placeholder="Contoh: 106">
                </div>
                <div class="form-group">
                    <label for="car-transmission">Transmisi</label>
                    <input type="text" id="car-transmission" name="transmission" placeholder="Contoh: CVT">
                </div>
                <div class="form-group">
                    <label for="car-engine">Detail Mesin</label>
                    <input type="text" id="car-engine" name="engine" placeholder="Contoh: 1.5L 4-silinder">
                </div>
            </div>
        </div>

        <div class="form-section">
            <h2>Kondisi & Legalitas</h2>
            <div class="form-grid">
                <div class="form-group">
                    <label for="car-owners">Pemilik Sebelumnya (Tangan ke-)</label>
                    <input type="number" id="car-owners" name="previous_owners" value="1">
                </div>
                <div class="form-group">
                    <label for="car-plate">Plat Nomor</label>
                    <input type="text" id="car-plate" name="license_plate" placeholder="Contoh: BK 1234 AA">
                </div>
                <div class="form-group">
                    <label for="car-tax">Pajak Berlaku Hingga</label>
                    <input type="date" id="car-tax" name="tax_valid_until">
                </div>
                <div class="form-group radio-group">
                    <label>Bebas Banjir?</label>
                    <div class="radio-options">
                        <label><input type="radio" name="is_flood_free" value="Yes" checked> Ya</label>
                        <label><input type="radio" name="is_flood_free" value="No"> Tidak</label>
                        <label><input type="radio" name="is_flood_free" value="N/A"> N/A</label>
                    </div>
                </div>
                <div class="form-group radio-group">
                    <label>Bebas Tabrakan?</label>
                    <div class="radio-options">
                        <label><input type="radio" name="is_accident_free" value="Yes" checked> Ya</label>
                        <label><input type="radio" name="is_accident_free" value="No"> Tidak</label>
                        <label><input type="radio" name="is_accident_free" value="N/A"> N/A</label>
                    </div>
                </div>
                <div class="form-group radio-group">
                    <label>Hot Deal?</label>
                    <div class="radio-options">
                        <label><input type="radio" name="is_hot_deal" value="Yes" checked> Ya</label>
                        <label><input type="radio" name="is_hot_deal" value="No"> Tidak</label>
                        <label><input type="radio" name="is_hot_deal" value="N/A"> N/A</label>
                    </div>
                </div>
            </div>
        </div>

        <div class="form-section">
                <h2>Deskripsi & Media</h2>
                <div class="form-group">
                    <label for="car-description">Deskripsi Iklan</label>
                    <textarea id="car-description" name="description" rows="4" placeholder="Jelaskan kondisi dan keunggulan mobil..."></textarea>
                </div>

                <div class="form-group">
                    <label>Gambar Galeri (Wajib isi minimal 1 gambar & caption)</label>
                    <div class="image-upload-grid">

                        <div class="image-upload-slot">
                            <label for="file-1" class="image-placeholder">
                                <img id="preview-1" src="" alt="Preview 1" class="image-preview">
                                <span>+ Tambah Gambar Utama</span>
                                <button type="button" class="remove-image" onclick="removeImage(1)">×</button>
                                <div class="success-indicator">✓</div>
                            </label>
                            <input type="file" id="file-1" name="gallery_images[]" accept="image/*" class="file-input" required>
                            <input type="text" name="captions[]" class="caption-input" placeholder="Caption untuk gambar utama..." required>
                        </div>

                        <div class="image-upload-slot">
                            <label for="file-2" class="image-placeholder">
                                <img id="preview-2" src="" alt="Preview 2" class="image-preview">
                                <span>+ Tambah Gambar 2</span>
                                <button type="button" class="remove-image" onclick="removeImage(2)">×</button>
                                <div class="success-indicator">✓</div>
                            </label>
                            <input type="file" id="file-2" name="gallery_images[]" accept="image/*" class="file-input">
                            <input type="text" name="captions[]" class="caption-input" placeholder="Caption untuk gambar 2...">
                        </div>

                        <div class="image-upload-slot">
                            <label for="file-3" class="image-placeholder">
                                <img id="preview-3" src="" alt="Preview 3" class="image-preview">
                                <span>+ Tambah Gambar 3</span>
                                <button type="button" class="remove-image" onclick="removeImage(3)">×</button>
                                <div class="success-indicator">✓</div>
                            </label>
                            <input type="file" id="file-3" name="gallery_images[]" accept="image/*" class="file-input">
                            <input type="text" name="captions[]" class="caption-input" placeholder="Caption untuk gambar 3...">
                        </div>

                        <div class="image-upload-slot">
                            <label for="file-4" class="image-placeholder">
                                <img id="preview-4" src="" alt="Preview 4" class="image-preview">
                                <span>+ Tambah Gambar 4</span>
                                <button type="button" class="remove-image" onclick="removeImage(4)">×</button>
                                <div class="success-indicator">✓</div>
                            </label>
                            <input type="file" id="file-4" name="gallery_images[]" accept="image/*" class="file-input">
                            <input type="text" name="captions[]" class="caption-input" placeholder="Caption untuk gambar 4...">
                        </div>
                        
                        <div class="image-upload-slot">
                            <label for="file-5" class="image-placeholder">
                                <img id="preview-5" src="" alt="Preview 5" class="image-preview">
                                <span>+ Tambah Gambar 5</span>
                                <button type="button" class="remove-image" onclick="removeImage(5)">×</button>
                                <div class="success-indicator">✓</div>
                            </label>
                            <input type="file" id="file-5" name="gallery_images[]" accept="image/*" class="file-input">
                            <input type="text" name="captions[]" class="caption-input" placeholder="Caption untuk gambar 5...">
                        </div>

                    </div>
                </div>
            </div>
    </form>
</section>

{% include '_footer-admin.twig.html' %}